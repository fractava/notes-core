(function(){"use strict";var t={7041:function(t,e,o){var i=o(144),n=o(629),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"devServerContainer"}},[e("fractava-notes")],1)},a=[],r={name:"DevServer",components:{}},l=r,d=o(3736),c=(0,d.Z)(l,s,a,!1,null,null,null),u=c.exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"FractavaNotes"},[e("navbar",{style:{height:t.navbarHeight+"%"},attrs:{navbarHeight:t.navbarHeight}}),e("pageContainer",{style:{height:100-t.navbarHeight+"%"},nativeOn:{scroll:function(e){return t.scroll.apply(null,arguments)}}},[e("page")],1)],1)},m=[],p=function(){var t=this,e=t._self._c;return e("div",{ref:"zoomedContainer",staticClass:"zoomedContainer",style:{width:t.loadedPage.scale*t.loadedPage.size.x+"px",height:t.loadedPage.scale*t.loadedPage.size.y+"px"}},[e("VueSelecto",{ref:"selecto",attrs:{selectableTargets:t.selectableTargets,selectByClick:!0,selectFromInside:!1,continueSelect:!1,toggleContinueSelect:"shift",hitRate:100},on:{"update:selectableTargets":function(e){t.selectableTargets=e},"update:selectable-targets":function(e){t.selectableTargets=e},select:t.onSelectoSelect,dragStart:t.onSelectoDragStart,drag:t.onSelectoDrag}}),e("div",{ref:"page",staticClass:"Page",class:[t.loadedPage.background.type],style:{width:t.loadedPage.size.x+"px",height:t.loadedPage.size.y+"px",transform:"scale("+t.loadedPage.scale+")","--backgroundSize":t.loadedPage.background.size+"px"},on:{pointerdown:t.pointerdown,pointermove:t.pointermove,pointerup:t.pointerup,pointerleave:t.pointerleave}},[e("pageTitle"),e("sketches",{staticClass:"collectionContainer"}),e("textBoxes",{staticClass:"collectionContainer"}),e("shapes",{staticClass:"collectionContainer"}),t.isMounted?e("Moveable",t._b({ref:"moveable",staticClass:"moveable",attrs:{rootContainer:t.body,container:t.$refs.page,target:t.targets,origin:!1},on:{dragGroupStart:t.handleMoveableDragGroupStart,dragStart:t.handleMoveableDragStart,dragGroup:t.handleMoveableDragGroup,drag:t.handleMoveableDrag,resizeGroupStart:t.handleMoveableResizeGroupStart,resizeStart:t.handleMoveableResizeStart,resizeGroup:t.handleMoveableResizeGroup,resize:t.handleMoveableResize,rotateGroupStart:t.handleMoveableRotateGroupStart,rotateStart:t.handleMoveableRotateStart,rotateGroup:t.handleMoveableRotateGroup,rotate:t.handleMoveableRotate}},"Moveable",t.moveableOptions,!1)):t._e()],1)],1)},g=[];const f={methods:{drawingPointerDown:function(t){this.$store.commit("newSketch",this.selectedPencil.color,{module:"core"}),this.shouldDrawLine(this.pointer.x,this.pointer.y,t)&&this.$store.commit("drawLine",{sketch:this.lastSketch,x:this.pointer.x,y:this.pointer.y,pressure:this.pointer.pressure},{module:"core"}),this.$store.commit("closePencilSettings",{},{module:"core"})},drawingPointerMove:function(t){this.shouldDrawLine(this.pointer.x,this.pointer.y,t)&&this.$store.commit("drawLine",{sketch:this.lastSketch,x:this.pointer.x,y:this.pointer.y,pressure:this.pointer.pressure},{module:"core"})},drawingPointerUp:function(){},drawingPointerLeave:function(){},shouldDrawLine:function(t,e){let o=!1;if(0==this.lastSketch.coordinates.length)this.debug&&console.log("first Line of Sketch"),o=!0;else{let i=this.lastSketch.coordinates[this.lastSketch.coordinates.length-1];this.distance({x:t,y:e},i)>3&&(o=!0)}return!o&&this.debug&&console.log("skipping line"),o}},computed:{...(0,n.rn)({selectedColor:t=>t.core.selectedColor})}},b={data:function(){return{addTextBoxStartCoordinates:{},addTextBoxEndCoordinates:{}}},methods:{addTextBoxPointerDown:function(){this.addTextBoxStartCoordinates.x=this.pointer.x,this.addTextBoxStartCoordinates.y=this.pointer.y},addTextBoxPointerMove:function(){this.addTextBoxEndCoordinates.x=this.pointer.x,this.addTextBoxEndCoordinates.y=this.pointer.y},addTextBoxPointerUp:function(){let t=Math.min(this.addTextBoxEndCoordinates.x,this.addTextBoxStartCoordinates.x),e=Math.max(this.addTextBoxEndCoordinates.x,this.addTextBoxStartCoordinates.x),o=Math.min(this.addTextBoxEndCoordinates.y,this.addTextBoxStartCoordinates.y),i=Math.max(this.addTextBoxEndCoordinates.y,this.addTextBoxStartCoordinates.y),n=e-t,s=i-o;console.log(n,s),this.$store.commit("newTextBox",{x:t,y:o,width:n,height:s},{module:"core"}),this.$store.commit("switchEditingMode",{mode:"editing"},{module:"core"})},addTextBoxPointerLeave:function(){this.$store.commit("switchEditingMode",{mode:"editing"},{module:"core"})}}},v={data:function(){return{addShapeStartCoordinates:{},addShapeEndCoordinates:{}}},methods:{addShapePointerDown:function(){this.addShapeStartCoordinates.x=this.pointer.x,this.addShapeStartCoordinates.y=this.pointer.y},addShapePointerMove:function(){this.addShapeEndCoordinates.x=this.pointer.x,this.addShapeEndCoordinates.y=this.pointer.y},addShapePointerUp:function(){let t=Math.min(this.addShapeEndCoordinates.x,this.addShapeStartCoordinates.x),e=Math.max(this.addShapeEndCoordinates.x,this.addShapeStartCoordinates.x),o=Math.min(this.addShapeEndCoordinates.y,this.addShapeStartCoordinates.y),i=Math.max(this.addShapeEndCoordinates.y,this.addShapeStartCoordinates.y),n=e-t,s=i-o;console.log(t,o,n,s),this.$store.commit("newShape",{type:this.editingModeAdditionalInformation.name,x:t,y:o,width:n,height:s,distort:this.editingModeAdditionalInformation.distort,strokeWeight:4},{module:"core"}),this.$store.commit("switchEditingMode",{mode:"editing"},{module:"core"})},addShapePointerLeave:function(){this.$store.commit("switchEditingMode",{mode:"editing"},{module:"core"})}}},x={methods:{domObjectsToIds(t){let e={shapes:[],textBoxes:[]};for(let o of t)o.hasAttribute("data-shape-id")?e.shapes.push(this.domShapeToId(o)):o.hasAttribute("data-textBox-id")&&e.textBoxes.push(this.domTextBoxToId(o));return e},domObjectToId(t){return t.hasAttribute("data-shape-id")?{type:"shapes",id:this.domShapeToId(t)}:t.hasAttribute("data-textBox-id")?{type:"textBoxes",id:this.domTextBoxToId(t)}:void 0},domShapeToId(t){return parseInt(t.getAttribute("data-shape-id"),10)},domTextBoxToId(t){return parseInt(t.getAttribute("data-textBox-id"),10)}}},P={methods:{onSelectoSelect:function(t){let e=this.domObjectsToIds(t.selected);this.$store.commit("updateFocusedObjects",{objects:e},{module:"core"}),this.targets=t.selected},onSelectoDragStart:function(t){const e=t.inputEvent.target;(this.$refs.moveable.isMoveableElement(e)||this.targets.some((t=>t===e||t.contains(e))))&&t.stop()},onSelectoDrag:function(t){"selecting"!==this.editingMode&&0==t.currentTarget.selectedTargets.length&&t.isFirstDrag&&(console.log("stop"),t.stop())}}},y={methods:{handleMoveableDragGroupStart({events:t}){console.log("handleDragGroupStart");for(let e of t)this.handleMoveableDragStart(e)},handleMoveableDragStart(t){console.log("handleDragStart");let e=this.domShapeToId(t.target),o=this.loadedPage.objects.shapes[e];t.set([o.position.x,o.position.y])},handleMoveableDragGroup({events:t}){console.log("handleDragGroup");for(let e of t)console.log(e),this.handleMoveableDrag(e)},handleMoveableDrag({target:t,transform:e,beforeTranslate:o}){console.log("handleDrag"),t.style.transform=e;let{id:i,type:n}=this.domObjectToId(t);this.$store.commit("moveObject",{id:i,type:n,x:o[0],y:o[1]},{module:"core"})},handleMoveableResizeGroupStart({events:t}){console.log("handleResizeGroupStart");for(let e of t)this.handleMoveableResizeStart(e)},handleMoveableResizeStart(t){console.log("handleResizeStart");let e=this.domShapeToId(t.target),o=this.loadedPage.objects.shapes[e];t.setOrigin(["%","%"]),t.dragStart&&t.dragStart.set([o.position.x,o.position.y])},handleMoveableResizeGroup({events:t}){console.log("handleResizeGroup");for(let e of t)this.handleMoveableResize(e)},handleMoveableResize({target:t,width:e,height:o,delta:i,drag:n}){console.log("handleResize"),i[0]&&(t.style.width=`${e}px`),i[1]&&(t.style.height=`${o}px`),t.style.transform=n.transform;let{id:s,type:a}=this.domObjectToId(t);this.$store.commit("resizeObject",{id:s,type:a,width:e,height:o},{module:"core"}),this.$store.commit("moveObject",{id:s,type:a,x:n.beforeTranslate[0],y:n.beforeTranslate[1]},{module:"core"})},handleMoveableRotateGroupStart({events:t}){console.log("handleRotateGroupStart");for(let e of t)this.handleMoveableRotateStart(e)},handleMoveableRotateStart(t){console.log("handleRotateStart"),console.log(t);let e=this.domShapeToId(t.target),o=this.loadedPage.objects.shapes[e];t.set(o.position.rotation)},handleMoveableRotateGroup({events:t}){console.log("handleRotateGroup");for(let e of t)this.handleMoveableRotate(e)},handleMoveableRotate({target:t,rotate:e,drag:o}){console.log("handleRotate"),t.style.transform=o.transform;let{id:i,type:n}=this.domObjectToId(t);this.$store.commit("rotateObject",{id:i,type:n,rotation:e},{module:"core"}),this.$store.commit("moveObject",{id:i,type:n,x:o.beforeTranslate[0],y:o.beforeTranslate[1]},{module:"core"})}}},k={mounted(){this.isMounted=!0},data:function(){return{isMounted:!1}}};var C=function(){var t=this,e=t._self._c;return e("svg",{staticClass:"sketch",style:{width:t.loadedPage.size.x+"px",height:t.loadedPage.size.y+"px"}},t._l(t.loadedPage.objects.sketches,(function(o,i){return e("g",{key:i,attrs:{opacity:o.color.a}},[t._l(t.sketchCoordinatesNotLast(o,i),(function(i,n){return e("line",{key:"sketch-"+n,style:{"stroke-width":i.width,stroke:t.sketchRGBString(o)},attrs:{x1:i.x,y1:i.y,x2:o.coordinates[n+1].x,y2:o.coordinates[n+1].y},on:{click:function(e){return t.clicked(n)}}})})),t._l(o.coordinates,(function(i,n){return e("circle",{key:"line-"+n,attrs:{cx:i.x,cy:i.y,r:i.width/2,stroke:"","stroke-width":"0",fill:t.sketchRGBString(o)},on:{click:function(e){return t.clicked(n)}}})}))],2)})),0)},_=[],S=o(4416),B={computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage})},methods:{sketchRGBString:function(t){var e=(0,S.Z)(t.color);return e.setAlpha(1),e.toRgbString()},sketchCoordinatesNotLast:function(t){let e=t.coordinates.length-1;return t.coordinates.filter((function(t,o){return o!=e}))},clicked:function(){}}},w=B,T=(0,d.Z)(w,C,_,!1,null,null,null),j=T.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textBoxesContainer"},t._l(this.loadedPage.objects.textBoxes,(function(o,i){return e("text-box",{key:"text-box-"+i,attrs:{id:i},on:{pointerdown:t.stopPropagation,pointermove:t.stopPropagation,pointerup:t.stopPropagation,pointerleave:t.stopPropagation}})})),1)},O=[],F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"textBoxContainer",class:{active:t.active,disabled:t.disabled}},[e("div",{ref:"container"},[e("quill",{staticClass:"textBox object",style:t.style,attrs:{"data-textBox-id":t.id,focused:t.active,disabled:t.disabled,defaultFont:t.defaultFont,defaultFontSize:t.defaultFontSize,toolbarDisabled:!0},on:{"assign:quill":t.assignQuill,activate:t.activate},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])},z=[],$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quill-editor",class:{toolbarDisabled:1==t.toolbarDisabled},on:{click:function(e){return t.$emit("activate")}}},[t._t("toolbar"),e("div",{ref:"editor"})],2)},N=[],R=o(2063),D=o.n(R),I={register:function(t){let e=t.import("blots/inline");class o extends e{static create(t){let e=super.create();return e.setAttribute("href",t),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}}o.blotName="link",o.tagName="a",t.register(o)}},E=o(7720),A=o(6955),L=D()["import"]("attributors/class/font");L.whitelist=["","Arial","Calibri","Roboto","Courier-New","Georgia","Trebuchet-MS","Lucida-Sans-Unicode","Times-New-Roman","Verdana","Futura","Charter","Terminal","Clean","Helvetica"],D().register(L,!0);let G=[];for(let Fo=5;Fo<=100;Fo++)G.push(Fo+"px");var Z=D()["import"]("attributors/style/size");Z.whitelist=G,D().register(Z,!0),I.register(D()),E.Z.register(D());var q={mixins:[A.jB],data:function(){return{mixinOptions:{theme:"snow",boundary:document.body,modules:{toolbar:[[{size:G}]]},placeholder:"Insert text here ...",readOnly:!1}}}},H=q,W=(0,d.Z)(H,$,N,!1,null,null,null),U=W.exports,V={components:{quill:U},props:{id:{type:Number}},mixins:[k],data:function(){return{defaultFont:"Calibri",defaultFontSize:"20px"}},computed:{textBox:function(){return this.loadedPage.objects.textBoxes[this.id]},content:{set(t){this.$store.commit("setTextBoxContent",{id:this.id,content:t},{module:"core"})},get(){return this.textBox.content}},disabled:function(){return"editing"!=this.editingMode},active:function(){return"editing"==this.editingMode&&this.$store.getters.objectFocused("textBoxes",this.id)&&0==this.openedDialog},style:function(){return{width:`${this.textBox.position.width}px`,height:`${this.textBox.position.height}px`,transformOrigin:this.textBox.position.transformOrigin,transform:`translate(${this.textBox.position.x}px, ${this.textBox.position.y}px) rotate(${this.textBox.position.rotation}deg)`}},...(0,n.rn)({loadedPage:t=>t.core.loadedPage,editingMode:t=>t.core.editingMode,focusedObjectType:t=>t.core.focusedObjectType,focuseObjectId:t=>t.core.focuseObjectId,openedDialog:t=>t.core.openedDialog})},methods:{activate:function(){this.$store.commit("focusObject",{type:"textBoxes",id:this.id},{module:"core"})},assignQuill:function(t){console.log(t),this.$store.commit("assignQuillToTextBox",{id:this.id,quill:t},{module:"core"})},handleDragStart(t){t.set([this.textBox.position.x,this.textBox.position.y])},handleDrag({target:t,transform:e,beforeTranslate:o}){console.log("onDrag left, top",e),t.style.transform=e,this.$store.commit("moveTextBox",{id:this.id,x:o[0],y:o[1]},{module:"core"})},handleResizeStart(t){console.log("handleResizeStart",t),t.setOrigin(["%","%"]),t.dragStart&&t.dragStart.set([this.textBox.position.x,this.textBox.position.y])},handleResize({target:t,width:e,height:o,delta:i,drag:n}){console.log("onResize",e,o),i[0]&&(t.style.width=`${e}px`),i[1]&&(t.style.height=`${o}px`),this.$store.commit("resizeTextBox",{id:this.id,width:e,height:o},{module:"core"}),this.$store.commit("moveTextBox",{id:this.id,x:n.beforeTranslate[0],y:n.beforeTranslate[1]},{module:"core"})},handleRotateStart(t){console.log("onRotateStart",t),t.set(this.textBox.position.rotation)},handleRotate({target:t,rotate:e,transform:o}){console.log("onRotate",e),t.style.transform=o,this.$store.commit("rotateTextBox",{id:this.id,rotation:e},{module:"core"})},handleRender(t){this.updateStyles(t.target)},updateStyles(t){console.log(t),console.log(`translate(${this.textBox.position.x}px, ${this.textBox.position.y}px) rotate(${this.textBox.position.rotation}deg)`),t.style.transformOrigin=this.textBox.position.transformOrigin,t.style.width=`${this.textBox.position.width}px`,t.style.height=`${this.textBox.position.height}px`,t.style.transform=`translate(${this.textBox.position.x}px, ${this.textBox.position.y}px) rotate(${this.textBox.position.rotation}deg)`}}},Y=V,X=(0,d.Z)(Y,F,z,!1,null,null,null),J=X.exports,Q={methods:{stopPropagation:function(t){console.log("preventing event"),t.stopPropagation(),this.$store.dispatch("pointerUp")}},components:{textBox:J},computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage})}},K=Q,tt=(0,d.Z)(K,M,O,!1,null,null,null),et=tt.exports,ot=function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"container"},t._l(t.loadedPage.objects.shapes,(function(t,o){return e("shape",{key:"shape"+o,ref:"shape",refInFor:!0,attrs:{id:o}})})),1)])},it=[],nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"shapeContainer",attrs:{"data-shape-id":t.id}},["square"==t.shape.type?e("div",{staticClass:"shape object",staticStyle:{border:"4px solid"},style:{"border-color":t.shape.color.stroke,"background-color":t.shape.color.fill,...t.style},attrs:{"data-shape-id":t.id}}):t._e(),"circle"==t.shape.type?e("div",{staticClass:"shape object",style:t.style,attrs:{"data-shape-id":t.id}},[e("svg",{attrs:{viewBox:"0 0 100 100",preserveAspectRatio:t.aspectRatioAttribute,height:"100%",width:"100%"}},[e("circle",{attrs:{cx:"50",cy:"50",r:"40",fill:t.shape.color.fill,stroke:t.shape.color.stroke,"stroke-width":"3"}})])]):t._e(),"star"==t.shape.type?e("div",{staticClass:"shape object",style:t.style,attrs:{"data-shape-id":t.id}},[e("svg",{attrs:{viewBox:"0 0 24 24",preserveAspectRatio:t.aspectRatioAttribute,width:"100%",height:"100%"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",fill:t.shape.color.fill,stroke:t.shape.color.stroke}})])]):t._e(),"arrow"==t.shape.type?e("div",{staticClass:"shape object",style:t.style,attrs:{"data-shape-id":t.id}},[e("svg",{attrs:{viewBox:"0 5 24 14",preserveAspectRatio:t.aspectRatioAttribute,width:"100%",height:"100%"}},[e("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),e("path",{attrs:{fill:t.shape.color.fill,stroke:t.shape.color.stroke,d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}})])]):t._e()])},st=[],at={props:{id:{type:Number}},mixins:[k],computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage,editingMode:t=>t.core.editingMode,focusedObjectType:t=>t.core.focusedObjectType,focuseObjectId:t=>t.core.focuseObjectId}),shape:function(){return this.loadedPage.objects.shapes[this.id]},active:function(){return("editing"==this.editingMode||"selecting"==this.editingMode)&&this.$store.getters.objectFocused("shapes",this.id)},aspectRatioAttribute:function(){return this.shape.distort?"none":"xMidYMid meet"},style:function(){return{width:`${this.shape.position.width}px`,height:`${this.shape.position.height}px`,transformOrigin:this.shape.position.transformOrigin,transform:`translate(${this.shape.position.x}px, ${this.shape.position.y}px) rotate(${this.shape.position.rotation}deg)`}}},methods:{}},rt=at,lt=(0,d.Z)(rt,nt,st,!1,null,null,null),dt=lt.exports,ct={props:{rootContainer:Object},data:function(){return{}},components:{shape:dt},computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage})}},ut=ct,ht=(0,d.Z)(ut,ot,it,!1,null,null,null),mt=ht.exports,pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pageTitleContainer",style:t.containerStyle},[e("md-field",{staticClass:"pageTitle",attrs:{"md-inline":""}},[e("label",[t._v("Title")]),e("md-input",{attrs:{disabled:"editing"!=t.editingMode},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1)},gt=[],ft={computed:{title:{set(t){this.$store.commit("setPageTitle",{title:t},{module:"core"})},get(){return this.loadedPage.title}},inputHeight:function(){let t=this.loadedPage.background.size;while(t<32)t+=this.loadedPage.background.size;return t},inputWidth:function(){let t=this.loadedPage.background.size;while(t<250)t+=this.loadedPage.background.size;return t},containerStyle:function(){return{top:this.loadedPage.background.size+1+"px",left:this.loadedPage.background.size+1+"px",height:this.inputHeight+"px","min-width":this.inputWidth-1+"px"}},...(0,n.rn)({loadedPage:t=>t.core.loadedPage,navbarHeight:t=>t.core.navbarHeight,editingMode:t=>t.core.editingMode})}},bt=ft,vt=(0,d.Z)(bt,pt,gt,!1,null,"193aaa96",null),xt=vt.exports,Pt=o(747),yt=o(6472),kt={components:{Sketches:j,pageTitle:xt,textBoxes:et,shapes:mt,VueSelecto:Pt.y,Moveable:yt.Z},mixins:[f,b,v,x,P,y,k],data:function(){return{targets:[],selectableTargets:[".object"],body:document.body}},methods:{pointerdown:function(t){switch(this.debug&&(console.log("pointerdown"),console.log(t)),this.setPointerPositionFromEvent(t),this.editingMode){case"drawing":this.drawingPointerDown(t);break;case"addTextBox":this.addTextBoxPointerDown(t);break;case"addShape":this.addShapePointerDown(t);break}},pointermove:function(t){if(this.pointer.down)switch(this.debug&&(console.log("pointermove"),console.log(t)),this.setPointerPositionFromEvent(t),this.editingMode){case"drawing":this.drawingPointerMove(t);break;case"addTextBox":this.addTextBoxPointerMove(t);break;case"addShape":this.addShapePointerMove(t);break}},pointerup:function(t){switch(this.debug&&(console.log("pointerup"),console.log(t)),this.editingMode){case"drawing":this.drawingPointerUp(t);break;case"addTextBox":this.addTextBoxPointerUp(t);break;case"addShape":this.addShapePointerUp(t);break}this.$store.dispatch("pointerUp")},pointerleave:function(t){switch(this.debug&&(console.log("pointerleave"),console.log(t)),this.editingMode){case"drawing":this.drawingPointerLeave(t);break;case"addTextBox":this.addTextBoxPointerLeave(t);break;case"addShape":this.addShapePointerLeave(t);break}this.$store.dispatch("pointerUp")},setPointerPositionFromEvent:function(t){let e=this.globalCoordinatesToPageCoordinates(t.x,t.y);this.$store.commit("setPointer",{down:!0,x:e.x,y:e.y,pressure:this.calculatePressure(t)})},globalCoordinatesToPageCoordinates:function(t,e){let o=1/this.loadedPage.scale*this.scrollOffsetX,i=1/this.loadedPage.scale*this.scrollOffsetY,n=1/this.loadedPage.scale*(t-this.$el.offsetLeft)+o,s=1/this.loadedPage.scale*(e-this.$el.offsetTop)+i;return{x:n,y:s}},calculatePressure:function(t){return 2*this.selectedPencil.width*(t.pressure||.5)}},computed:{...(0,n.rn)({debug:t=>t.core.debug,loadedPage:t=>t.core.loadedPage,navbarHeight:t=>t.core.navbarHeight,scrollOffsetX:t=>t.core.loadedPage.scrollOffsetX,scrollOffsetY:t=>t.core.loadedPage.scrollOffsetY,editingMode:t=>t.core.editingMode,editingModeAdditionalInformation:t=>t.core.editingModeAdditionalInformation,pointer:t=>t.core.pointer,exportInProgress:t=>t.core.exportInProgress}),...(0,n.Se)(["lastSketch","selectedPencil","moveableOptions"])}},Ct=kt,_t=(0,d.Z)(Ct,p,g,!1,null,"f9202862",null),St=_t.exports,Bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"navbar"},[e("md-tabs",[e("tab-selector",{attrs:{content:"Start",id:"0"}}),e("tab-selector",{attrs:{content:"Drawing",id:"1"}}),e("tab-selector",{attrs:{content:"Insert",id:"2"}}),e("tab-selector",{attrs:{content:"View",id:"3"}})],1),e("div",{staticClass:"navbarContent"},[e("tab",{attrs:{id:"0"}},[e("md-button",{staticClass:"navbarButton smallNavbarButton",attrs:{onclick:"window.print()"}},[e("md-icon",[t._v("print")])],1),e("export-menu"),"editing"==t.editingMode&&t.focusedObjects.textBoxes&&1===t.focusedObjects.textBoxes.length&&1===t.numberOfObjectsFocused?e("quill-toolbar"):t._e(),"editing"==t.editingMode&&t.focusedObjects.shapes&&1===t.focusedObjects.shapes.length&&1===t.numberOfObjectsFocused?e("shape-toolbar"):t._e()],1),e("tab",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{id:"1"}},[t._l(t.pencils,(function(t,o){return e("pencilSelector",{key:o,attrs:{id:o}})})),e("add-pencil")],2),e("tab",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{id:"2"}},[e("add-text-box"),e("add-shapes")],1),e("tab",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{id:"3"}},[e("zoom-control"),e("background-selector"),e("page-resize")],1)],1)],1)},wt=[],Tt=function(){var t=this,e=t._self._c;return e("md-tab",{attrs:{"md-label":t.content},on:{click:t.select}})},jt=[],Mt={props:{id:{default:0},content:{type:String,default:""}},methods:{select:function(){this.$store.commit("selectNavbarTab",{id:this.id},{module:"core"})}}},Ot=Mt,Ft=(0,d.Z)(Ot,Tt,jt,!1,null,null,null),zt=Ft.exports,$t=function(){var t=this,e=t._self._c;return t.id==t.activeNavbarTab?e("div",{staticClass:"navbarTab"},[e("mode-switch-buttons"),t._t("default")],2):t._e()},Nt=[],Rt=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%",display:"flex"}},[e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":"editing"==t.editingMode},on:{click:function(e){return t.switchEditingMode("editing")}}},[e("md-icon",[t._v("edit")]),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v("Edit")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":"selecting"==t.editingMode},on:{click:function(e){return t.switchEditingMode("selecting")}}},[e("md-icon",[t._v("highlight_alt")]),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v("Select")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":"drawing"==t.editingMode},on:{click:function(e){return t.switchEditingMode("drawing")}}},[e("md-icon",[t._v("gesture")]),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v("Draw")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton"})],1)},Dt=[],It={computed:(0,n.rn)({editingMode:t=>t.core.editingMode}),methods:{switchEditingMode:function(t){this.$store.commit("switchEditingMode",{mode:t},{module:"core"})}}},Et=It,At=(0,d.Z)(Et,Rt,Dt,!1,null,null,null),Lt=At.exports,Gt={components:{modeSwitchButtons:Lt},props:{id:{default:0}},computed:(0,n.rn)({activeNavbarTab:t=>t.core.activeNavbarTab})},Zt=Gt,qt=(0,d.Z)(Zt,$t,Nt,!1,null,null,null),Ht=qt.exports,Wt=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%",display:"flex"}},[e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("bold",!0)},on:{click:function(e){return t.toggleFormat("bold")}}},[e("md-icon",[t._v("format_bold")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("italic",!0)},on:{click:function(e){return t.toggleFormat("italic")}}},[e("md-icon",[t._v("format_italic")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("underline",!0)},on:{click:function(e){return t.toggleFormat("underline")}}},[e("md-icon",[t._v("format_underlined")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("strike",!0)},on:{click:function(e){return t.toggleFormat("strike")}}},[e("md-icon",[t._v("strikethrough_s")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("blockquote",!0)},on:{click:function(e){return t.toggleFormat("blockquote")}}},[e("md-icon",[t._v("format_quote")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("code",!0)},on:{click:function(e){return t.toggleFormat("code")}}},[e("md-icon",[t._v("code")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",on:{click:function(e){t.insertEmbed("mathQuill","")}}},[e("md-icon",[t._v("functions")])],1),e("add-symbol"),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("header",1)},on:{click:function(e){return t.toggleFormatWithValue("header",1,0)}}},[e("md-icon",[t._v("looks_one")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("header",2)},on:{click:function(e){return t.toggleFormatWithValue("header",2,0)}}},[e("md-icon",[t._v("looks_two")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("list","ordered")},on:{click:function(e){return t.toggleFormatWithValue("list","ordered",!1)}}},[e("md-icon",[t._v("format_list_numbered")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("list","bullet")},on:{click:function(e){return t.toggleFormatWithValue("list","bullet",!1)}}},[e("md-icon",[t._v("format_list_bulleted")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("script","sub")},on:{click:function(e){return t.toggleFormatWithValue("script","sub",!1)}}},[e("md-icon",[t._v("subscript")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("script","super")},on:{click:function(e){return t.toggleFormatWithValue("script","super",!1)}}},[e("md-icon",[t._v("superscript")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",on:{click:function(e){return t.setFormatRelative("indent",-1)}}},[e("md-icon",[t._v("format_indent_decrease")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",on:{click:function(e){return t.setFormatRelative("indent",1)}}},[e("md-icon",[t._v("format_indent_increase")])],1),e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":""}},[e("md-button",{staticClass:"navbarButton smallNavbarButton",attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("title")])],1),e("md-menu-content",{staticClass:"symbolsMenu"},[e("span",[e("span",{staticClass:"md-headline"},[t._v("Text Color:")]),e("div",[e("color-picker",{attrs:{color:t.getFormat("color")},on:{update:t.updateTextColor}})],1)])])],1),e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":""}},[e("md-button",{staticClass:"navbarButton smallNavbarButton",attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("format_paint")])],1),e("md-menu-content",{staticClass:"symbolsMenu"},[e("span",[e("span",{staticClass:"md-headline"},[t._v("Background Color:")]),e("div",[e("color-picker",{attrs:{color:t.getFormat("background")},on:{update:t.updateBackgroundColor}})],1)])])],1),e("md-field",[e("md-select",{attrs:{name:"font",id:"font"},model:{value:t.font,callback:function(e){t.font=e},expression:"font"}},t._l(t.fonts,(function(o){return e("md-option",{key:"font_option"+o,attrs:{value:o}},[t._v(t._s(o))])})),1)],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("align",void 0)},on:{click:function(e){return t.setFormat("align","")}}},[e("md-icon",[t._v("format_align_left")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("align","center")},on:{click:function(e){return t.setFormat("align","center")}}},[e("md-icon",[t._v("format_align_center")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.isFormat("align","right")},on:{click:function(e){return t.setFormat("align","right")}}},[e("md-icon",[t._v("format_align_right")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",on:{click:t.removeFormat}},[e("md-icon",[t._v("format_clear")])],1),e("md-dialog-prompt",{attrs:{"md-active":t.linkDialogActive,"md-title":"Add Link","md-input-maxlength":"300","md-input-placeholder":"URL","md-confirm-text":"Add Link","md-cancel-text":"remove Link"},on:{"update:mdActive":function(e){t.linkDialogActive=e},"update:md-active":function(e){t.linkDialogActive=e},"md-cancel":t.onLinkCancel,"md-confirm":t.onLinkConfirm},model:{value:t.currentLink,callback:function(e){t.currentLink=e},expression:"currentLink"}}),e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":!t.isFormat("link",void 0)},on:{click:t.activateLinkPromt}},[e("md-icon",[t._v("link")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton",on:{click:function(e){return t.setFormatRelativeAdvanced("font-size","size",-1,20,"px")}}},[e("md-icon",[t._v("arrow_drop_down")])],1),e("md-button",{staticClass:"navbarButton smallNavbarButton"},[t._v(" "+t._s(t.getFormat("size"))+" ")]),e("md-button",{staticClass:"navbarButton smallNavbarButton",on:{click:function(e){return t.setFormatRelativeAdvanced("font-size","size",1,20,"px")}}},[e("md-icon",[t._v("arrow_drop_up")])],1),t.debug?e("md-button",{staticClass:"navbarButton smallNavbarButton",on:{click:t.debugOutput}},[t._v(" debug ")]):t._e()],1)},Ut=[],Vt=function(){var t=this,e=t._self._c;return e("sketch-picker",{staticClass:"sketchPicker",attrs:{value:t.color||t.colorRGBA,presetColors:t.presetColors},on:{input:t.update}})},Yt=[],Xt=o(8533),Jt={components:{sketchPicker:Xt.Sketch},props:{colorRGBA:{type:Object,default(){return{r:0,g:0,b:0,a:0}}},color:{type:String,default:""}},methods:{update:function(t){this.$emit("update",t)}},computed:{...(0,n.rn)({presetColors:t=>t.core.presetColors})}},Qt=Jt,Kt=(0,d.Z)(Qt,Vt,Yt,!1,null,null,null),te=Kt.exports,ee=function(){var t=this,e=t._self._c;return e("div",[e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":""}},[e("md-button",{staticClass:"smallNavbarButton",attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("emoji_symbols")])],1),e("md-menu-content",{staticClass:"navbarMenu"},[e("span",[e("span",{staticClass:"md-headline"},[t._v("Symbols:")]),e("div",{staticClass:"symbolsContainer"},t._l(t.symbols,(function(o,i){return e("md-button",{key:"symbol"+i,on:{click:function(e){return t.add(o)}}},[e("md-icon",[t._v(t._s(o))])],1)})),1)])])],1)],1)},oe=[],ie={data:function(){return{symbols:["€","£","¥","©","®","™","±","≠","≤","≥","÷","×","∞","µ","α","β","π","Ω","Σ","Δ","√","∩","∪","⊆"]}},methods:{add:function(t){this.$store.commit("insertText",{text:t},{module:"core"})}}},ne=ie,se=(0,d.Z)(ne,ee,oe,!1,null,null,null),ae=se.exports,re={components:{colorPicker:te,addSymbol:ae},data:function(){return{linkDialogActive:!1,currentLink:"",fonts:["Roboto","Calibri","Arial","Courier-New","Georgia","Trebuchet-MS","Lucida-Sans-Unicode","Times-New-Roman","Verdana","Futura","Charter","Terminal","Clean","Helvetica"]}},methods:{debugOutput:function(){console.log(this.loadedPage)},selectedText:function(){return this.$store.getters.textSelection},getFormat:function(t){let e=this.selectedText();return!!e&&this.$store.getters.getFormat({index:e.index,length:e.length,format:t})},toggleFormat:function(t){let e=this.getFormat(t);this.setFormat(t,!e)},toggleFormatWithValue:function(t,e,o){let i=this.getFormat(t);i==e?this.setFormat(t,o):this.setFormat(t,e)},setFormat:function(t,e){this.$store.commit("formatText",{format:t,value:e},{module:"core"})},setFormatRelative:function(t,e){let o=this.getFormat(t)||0;this.setFormat(t,o+e)},setFormatRelativeAdvanced:function(t,e,o,i,n){let s=this.getFormat(e);s&&n&&(s=s.replace(n,""),s=parseInt(s)),s=s||i||0;let a=s+o;n&&(a+=n),this.setFormat(t,a)},isFormat:function(t,e){return this.getFormat(t)==e},removeFormat:function(){this.$store.commit("removeFormat",{},{module:"core"})},updateTextColor:function(t){this.setFormat("color",t.hex8)},updateBackgroundColor:function(t){this.setFormat("background",t.hex8)},onLinkConfirm(t){console.log(t),this.setFormat("link",t)},onLinkCancel(){this.setFormat("link",void 0)},activateLinkPromt(){this.currentLink=this.getFormat("link")||"https://",this.linkDialogActive=!0},insertEmbed:function(t,e){this.$store.commit("insertEmbed",{type:t,content:e},{module:"core"})}},computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage,debug:t=>t.core.debug}),font:{set(t){this.setFormat("font",t)},get(){return this.getFormat("font")}}},watch:{linkDialogActive:function(t){t?this.$store.commit("openedDialog",{},{module:"core"}):(this.$store.commit("closedDialog",{},{module:"core"}),this.currentLink="")}}},le=re,de=(0,d.Z)(le,Wt,Ut,!1,null,null,null),ce=de.exports,ue=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100%"}},[e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":""}},[e("md-button",{attrs:{"md-menu-trigger":""}},[e("span",[t._v("Fill Color")])]),e("md-menu-content",{staticClass:"symbolsMenu"},[e("span",[e("span",{staticClass:"md-headline"},[t._v("Fill Color:")]),e("div",{staticClass:"fillColorPickerContainer"},[e("color-picker",{attrs:{color:t.fillColor},on:{update:t.updateFillColor}})],1)])])],1),e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":""}},[e("md-button",{attrs:{"md-menu-trigger":""}},[e("span",[t._v("Stroke Color")])]),e("md-menu-content",{staticClass:"symbolsMenu"},[e("span",[e("span",{staticClass:"md-headline"},[t._v("Stroke Color:")]),e("div",{staticClass:"fillColorPickerContainer"},[e("color-picker",{attrs:{color:t.strokeColor},on:{update:t.updateStrokeColor}})],1)])])],1),e("md-button",{staticClass:"navbarButton",class:{"md-raised":t.shape.distort},on:{click:function(e){return t.toggleDistort()}}},[t._v(" Distort ")])],1)},he=[],me={components:{colorPicker:te},data:function(){return{fillColorPickerExtended:!1,strokeColorPickerExtended:!1}},methods:{updateFillColor:function(t){this.$store.commit("setShapeFillColor",{id:this.id,color:t.hex8},{module:"core"})},updateStrokeColor:function(t){this.$store.commit("setShapeStrokeColor",{id:this.id,color:t.hex8},{module:"core"})},toggleDistort:function(){this.$store.commit("setShapeDistort",{id:this.id,distort:!this.shape.distort},{module:"core"})}},computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage,focusedObjects:t=>t.core.focusedObjects}),id:function(){return this.focusedObjects.shapes[0]},shape:function(){return this.loadedPage.objects.shapes[this.id]},strokeColor:function(){return this.shape.color.stroke},fillColor:function(){return this.shape.color.fill}}},pe=me,ge=(0,d.Z)(pe,ue,he,!1,null,null,null),fe=ge.exports,be=function(){var t=this,e=t._self._c;return e("md-menu",{attrs:{"md-direction":"bottom-start","md-align-trigger":"","md-close-on-click":""}},[e("md-button",{staticClass:"navbarButton smallNavbarButton",class:{"md-raised":t.exportInProgress},attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("save_alt")])],1),e("md-menu-content",{staticClass:"exportMenu navbarMenu"},[e("div",{staticClass:"exportButtonContainer"},[e("md-button",{staticClass:"exportButton",on:{click:function(e){return t.exportPDF()}}},[t._v("PDF")]),e("md-button",{staticClass:"exportButton",on:{click:function(e){return t.exportPNG()}}},[t._v("PNG")]),e("md-button",{staticClass:"exportButton",on:{click:function(e){return t.exportWEBP()}}},[t._v("WEBP")]),e("md-button",{staticClass:"exportButton",on:{click:function(e){return t.exportJPG()}}},[t._v("JPG")])],1)])],1)},ve=[],xe=o(1781),Pe=o.n(xe),ye={methods:{html2pdfStart:function(t){this.$store.commit("exportStarted",{},{module:"core"});var e=this.getPageClone(),o={filename:"download.pdf",image:{type:t},html2canvas:this.html2canvasOptions,jsPDF:{unit:"pt",format:[this.loadedPage.size.x,this.loadedPage.size.y]}};return Pe()().set(o).from(e)},exportPNG:function(){let t=this;this.html2pdfStart("png").outputImg("datauristring").then((function(e){console.log(e),t.saveFile(e,"png","download"),t.$store.commit("exportStopped",{},{module:"core"})}))},exportWEBP:function(){let t=this;this.html2pdfStart("webp").outputImg("datauristring").then((function(e){console.log(e),t.saveFile(e,"webp","download"),t.$store.commit("exportStopped",{},{module:"core"})}))},exportJPG:function(){let t=this;this.html2pdfStart("jpeg").outputImg("datauristring").then((function(e){console.log(e),t.saveFile(e,"jpg","download"),t.$store.commit("exportStopped",{},{module:"core"})}))},exportPDF:function(){let t=this;this.html2pdfStart("png").save().then((function(){t.$store.commit("exportStopped",{},{module:"core"})}))},getPageClone:function(){let t=document.getElementsByClassName("Page")[0].cloneNode(!0);return t.style.transform="",console.log(t),t},saveFile:function(t,e,o="download"){console.log("save");let i=document.createElement("a");i.download=o+"."+e,i.href=t,i.click()}},computed:{...(0,n.rn)({exportInProgress:t=>t.core.exportInProgress,loadedPage:t=>t.core.loadedPage}),html2canvasOptions:function(){return{ignoreElements:function(t){return t.classList.contains("handle")},width:this.loadedPage.size.x,height:this.loadedPage.size.y,onclone:t=>{const e=Array.from(t.querySelectorAll("svg:not(.sketch)"));e.forEach((t=>{const e=t.getBBox();t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("width",t.parentElement.clientWidth),t.setAttribute("height",t.parentElement.clientHeight)}))}}}}},ke=ye,Ce=(0,d.Z)(ke,be,ve,!1,null,null,null),_e=Ce.exports,Se=function(){var t=this,e=t._self._c;return e("md-button",{staticClass:"navbarButton",on:{click:t.add}},[e("md-icon",[t._v("add")])],1)},Be=[],we={methods:{add:function(){this.$store.commit("addPencil",{color:{r:0,g:0,b:0},width:8},{module:"core"}),this.$store.dispatch("selectPencil",{id:this.pencils.length-1},{module:"core"})}},computed:(0,n.rn)({pencils:t=>t.core.pencils})},Te=we,je=(0,d.Z)(Te,Se,Be,!1,null,null,null),Me=je.exports,Oe=function(){var t=this,e=t._self._c;return e("div",[e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":"","md-active":t.openedPencilSettingsId==t.id},on:{click:t.select}},[e("md-button",{class:{"md-raised":t.id==t.selectedPencilId&&"drawing"==t.editingMode}},[e("md-icon",{style:{color:t.pencilRGBAString}},[t._v("create")])],1),e("md-menu-content",{staticClass:"navbarMenu"},[e("span",[t._v(" Pencil Settings: "),e("color-picker",{attrs:{colorRGBA:t.pencils[t.id].color},on:{update:t.updateColor}}),e("div",{staticClass:"widthSliderContainer"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.width,expression:"width",modifiers:{number:!0}}],staticClass:"widthSlider",attrs:{type:"range",min:"1",max:"50"},domProps:{value:t.width},on:{__r:function(e){t.width=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}})])],1)])],1)],1)},Fe=[],ze={components:{colorPicker:te},props:{id:{type:Number,default:0}},computed:{...(0,n.rn)({pencils:t=>t.core.pencils,selectedPencilId:t=>t.core.selectedPencilId,openedPencilSettingsId:t=>t.core.openedPencilSettingsId,editingMode:t=>t.core.editingMode}),pencilRGBAString:function(){var t=(0,S.Z)(this.pencils[this.id].color);return t.toRgbString()},width:{set(t){this.$store.commit("changePencilWidth",{id:this.id,width:t},{module:"core"})},get(){return this.pencils[this.id].width}}},methods:{select:function(){"drawing"==this.editingMode&&this.selectedPencilId==this.id&&this.openedPencilSettingsId!=this.id?this.$store.commit("switchPencilSettings",{id:this.id},{module:"core"}):this.$store.commit("closePencilSettings",{},{module:"core"}),this.$store.dispatch("selectPencil",{id:this.id},{module:"core"})},updateColor:function(t){console.log(t),this.$store.commit("changePencilColor",{id:this.id,color:t.rgba},{module:"core"})}}},$e=ze,Ne=(0,d.Z)($e,Oe,Fe,!1,null,"4fa6d056",null),Re=Ne.exports,De=function(){var t=this,e=t._self._c;return e("md-button",{staticClass:"navbarButton",on:{click:t.add}},[e("md-icon",[t._v("post_add")])],1)},Ie=[],Ee={methods:{add:function(){this.$store.commit("switchEditingMode",{mode:"addTextBox"},{module:"core"})}}},Ae=Ee,Le=(0,d.Z)(Ae,De,Ie,!1,null,"3073d6b4",null),Ge=Le.exports,Ze=function(){var t=this,e=t._self._c;return e("div",[e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":"","md-close-on-click":""}},[e("md-button",{attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("category")])],1),e("md-menu-content",{staticClass:"navbarMenu"},[e("span",[e("div",{staticClass:"addFormContainer"},t._l(t.shapes,(function(o,i){return e("md-button",{key:"shape_selector"+i,on:{click:function(e){return t.add(o)}}},[e("md-icon",[t._v(t._s(o.icon))])],1)})),1)])])],1)],1)},qe=[],He={data:function(){return{shapes:[{name:"square",distort:!0,icon:"crop_square"},{name:"circle",distort:!1,icon:"radio_button_unchecked"},{name:"star",distort:!1,icon:"star_border"},{name:"arrow",distort:!0,icon:"arrow_right_alt"}]}},methods:{add:function(t){this.$store.commit("switchEditingMode",{mode:"addShape",information:t},{module:"core"})}},computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage})}},We=He,Ue=(0,d.Z)(We,Ze,qe,!1,null,null,null),Ve=Ue.exports,Ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"zoomControlContainer"},[e("md-button",{staticClass:"navbarButton",on:{click:t.plus}},[e("md-icon",[t._v("add")])],1),e("md-button",{staticClass:"navbarButton",on:{click:t.minus}},[e("md-icon",[t._v("remove")])],1),e("md-button",{staticClass:"navbarButton",on:{click:t.reset}},[e("md-icon",[t._v("youtube_searched_for")]),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v("Reset Zoom")])],1),e("md-button",{staticClass:"navbarButton",on:{click:t.snapToWidth}},[e("md-icon",[t._v("highlight_alt")]),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v("Snap to objects")])],1)],1)},Xe=[],Je={methods:{plus:function(){this.$store.commit("setScale",{scale:this.loadedPage.scale+.1},{module:"core"})},minus:function(){this.$store.commit("setScale",{scale:this.loadedPage.scale-.1},{module:"core"})},reset:function(){console.log("reset"),this.$store.commit("setScale",{scale:1},{module:"core"}),this.$store.commit("scroll",{x:0,y:0},{module:"core"})},snapToWidth:function(){let t=document.getElementsByTagName("body")[0].clientWidth,e=this.loadedPage.objects.textBoxes[0].position.x,o=this.loadedPage.objects.textBoxes[0].position.x+this.loadedPage.objects.textBoxes[0].position.width;for(let s in this.loadedPage.objects.textBoxes){let t=this.loadedPage.objects.textBoxes[s];t.position.x<e&&(e=t.x),t.position.x+t.position.width>o&&(o=t.position.x+t.position.width)}console.log(e,o);let i=o-e,n=t/i-.1;console.log(n),this.$store.commit("setScale",{scale:n},{module:"core"}),this.$store.commit("scroll",{x:e},{module:"core"})}},computed:(0,n.rn)({loadedPage:t=>t.core.loadedPage})},Qe=Je,Ke=(0,d.Z)(Qe,Ye,Xe,!1,null,null,null),to=Ke.exports,eo=function(){var t=this,e=t._self._c;return e("div",[e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":""}},[e("md-button",{attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("border_all")]),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v("Page Background")])],1),e("md-menu-content",{staticClass:"navbarMenu"},[e("span",[e("span",{staticClass:"md-headline"},[t._v("Page Background:")]),e("div",{staticClass:"backgroundsContainer"},[e("div",{staticStyle:{"margin-bottom":"15px"}},t._l(t.backgroundTypes,(function(o,i){return e("md-button",{key:"backgroundType"+i,class:{"md-raised":t.loadedPage.background.type==o},on:{click:function(e){return t.apply(o)}}},[t._v(" "+t._s(o)+" ")])})),1),"none"!=t.loadedPage.background.type?e("div",[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.size,expression:"size",modifiers:{number:!0}}],staticClass:"sizeSlider",attrs:{type:"range",min:"10",max:"90"},domProps:{value:t.size},on:{__r:function(e){t.size=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),t._v(" "+t._s(t.size)+" ")]):t._e()])])])],1)],1)},oo=[],io={data:function(){return{backgroundTypes:["none","lines","grid","dottedGrid"]}},methods:{apply:function(t){this.$store.commit("selectBackground",{type:t},{module:"core"})}},computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage}),size:{set(t){this.$store.commit("setBackgroundSize",{size:t},{module:"core"})},get(){return this.loadedPage.background.size}}}},no=io,so=(0,d.Z)(no,eo,oo,!1,null,"d4736338",null),ao=so.exports,ro=function(){var t=this,e=t._self._c;return e("div",[e("md-menu",{staticClass:"navbarButton",attrs:{"md-direction":"bottom-start","md-align-trigger":""}},[e("md-button",{attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("aspect_ratio")]),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v("Page Size")])],1),e("md-menu-content",{staticClass:"navbarMenu"},[e("span",[e("span",{staticClass:"md-headline"},[t._v("Page Size:")]),e("div",{staticClass:"pageResizeContainer"},[e("div",{staticStyle:{"margin-bottom":"15px"}},t._l(t.presets,(function(o,i){return e("md-button",{key:"preset"+i,class:{"md-raised":o.name===t.selectedPresetName},on:{click:function(e){return t.apply(i)}}},[t._v(" "+t._s(o.name)+" "),e("md-tooltip",{attrs:{"md-direction":"bottom"}},[t._v(t._s(o.tooltip))])],1)})),1),e("span",[t._v(" width: "+t._s(t.width)+" height: "+t._s(t.height)+" ")]),"custom"===t.selectedPresetName?e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.width,expression:"width",modifiers:{number:!0}}],staticClass:"pageResizeInput",attrs:{type:"range",min:"200",max:"9000"},domProps:{value:t.width},on:{__r:function(e){t.width=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}):t._e(),"custom"===t.selectedPresetName?e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.height,expression:"height",modifiers:{number:!0}}],staticClass:"pageResizeInput",attrs:{type:"range",min:"200",max:"9000"},domProps:{value:t.height},on:{__r:function(e){t.height=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}):t._e()])])])],1)],1)},lo=[],co={data:function(){return{custom:!1,presets:[{name:"A4",width:1240,height:1754,tooltip:"A4 150 DPI"},{name:"A3",width:1754,height:2480,tooltip:"A3 150 DPI"},{name:"A5",width:874,height:1240,tooltip:"A3 150 DPI"},{name:"square",width:1e3,height:1e3,tooltip:"Square"},{name:"custom",tooltip:"custom size in px"}]}},methods:{apply:function(t){let e=this.presets[t];this.custom="custom"==e.name,e.width&&(this.width=e.width),e.height&&(this.height=e.height)}},computed:{...(0,n.rn)({loadedPage:t=>t.core.loadedPage}),width:{set(t){this.$store.commit("setPageWidth",{width:t},{module:"core"})},get(){return this.loadedPage.size.x}},height:{set(t){this.$store.commit("setPageHeight",{height:t},{module:"core"})},get(){return this.loadedPage.size.y}},selectedPresetName:function(){if(this.custom)return"custom";for(let t in this.presets){let e=this.presets[t];if(this.loadedPage.size.x==e.width&&this.loadedPage.size.y==e.height)return e.name}return"custom"}}},uo=co,ho=(0,d.Z)(uo,ro,lo,!1,null,null,null),mo=ho.exports,po={components:{tabSelector:zt,tab:Ht,pencilSelector:Re,addPencil:Me,zoomControl:to,backgroundSelector:ao,quillToolbar:ce,shapeToolbar:fe,addTextBox:Ge,addShapes:Ve,exportMenu:_e,pageResize:mo},data:function(){return{openedPencilSettingsId:-1}},computed:{...(0,n.rn)({activeNavbarTab:t=>t.core.activeNavbarTab,pencils:t=>t.core.pencils,focusedObjects:t=>t.core.focusedObjects,editingMode:t=>t.core.editingMode}),...(0,n.Se)(["numberOfObjectsFocused"])},mixins:[]},go=po,fo=(0,d.Z)(go,Bt,wt,!1,null,null,null),bo=fo.exports,vo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"PageContainer"},[t._t("default")],2)},xo=[],Po={},yo=(0,d.Z)(Po,vo,xo,!1,null,null,null),ko=yo.exports,Co={components:{Page:St,Navbar:bo,PageContainer:ko},mounted:function(){},methods:{scroll:function(t){this.debug&&console.log(t);let e=t.srcElement.scrollLeft,o=t.srcElement.scrollTop;this.$store.commit("setScrollOffset",{x:e,y:o},{module:"core"})}},computed:(0,n.rn)({debug:t=>t.core.debug,navbarHeight:t=>t.core.navbarHeight,scrollOffsetX:t=>t.core.loadedPage.scrollOffsetX,scrollOffsetY:t=>t.core.loadedPage.scrollOffsetY})},_o=Co,So=(0,d.Z)(_o,h,m,!1,null,null,null),Bo=So.exports,wo=o(8797),To=o.n(wo),jo={install:function(t,e){console.log(e),t.use(To()),e.store.commit("setDebug",e.debug,{module:"core"}),t.prototype.distance=function(t,e){let o=t.x-e.x,i=t.y-e.y;return Math.sqrt(o*o+i*i)},t.component("FractavaNotes",Bo)}},Mo={state:{debug:!1,loadedPage:{title:"",objects:{sketches:[],textBoxes:[],shapes:[],images:[],files:[]},background:{type:"grid",size:50},size:{x:4e3,y:4e3},scrollOffsetX:0,scrollOffsetY:0,scale:1},navbarHeight:10,pencils:[{color:{r:0,g:0,b:0},width:10,opacity:1},{color:{r:255,g:0,b:0},width:15,opacity:1}],selectedPencilId:0,activeNavbarTab:0,openedPencilSettingsId:-1,pointer:{down:!1,x:!1,y:!1,pressure:!1},focusedObjects:{textBoxes:[],shapes:[]},editingMode:"editing",editingModeAdditionalInformation:"",presetColors:["#f00","#00ff00","#00ff0055","rgb(201, 76, 76)","rgba(0,0,255,1)","hsl(89, 43%, 51%)","hsla(89, 43%, 51%, 0.6)"],openedDialog:!1,exportInProgress:!1},mutations:{setDebug(t,e){t.debug=e},openedDialog(t){t.openedDialog=!0},closedDialog(t){t.openedDialog=!1},exportStarted(t){t.exportInProgress=!0},exportStopped(t){t.exportInProgress=!1},selectNavbarTab(t,e){t.activeNavbarTab=e.id},switchEditingMode(t,e){t.editingMode=e.mode,t.editingModeAdditionalInformation=e.information},setPageTitle(t,e){t.loadedPage.title=e.title},setScrollOffset(t,e){t.loadedPage.scrollOffsetX=e.x,t.loadedPage.scrollOffsetY=e.y},setPointer(t,e){t.pointer=e},updateFocusedObjects(t,e){t.focusedObjects=e.objects},scroll(t,e){void 0!=e.x&&(t.loadedPage.scrollOffsetX=e.x,document.getElementsByClassName("PageContainer")[0].scrollLeft=e.x*t.loadedPage.scale),void 0!=e.y&&(t.loadedPage.scrollOffsetY=e.y,document.getElementsByClassName("PageContainer")[0].scrollTop=e.y*t.loadedPage.scale)},setScale(t,e){e.scale>=.1&&(t.loadedPage.scale=e.scale)},selectBackground(t,e){t.loadedPage.background.type=e.type},setBackgroundSize(t,e){t.loadedPage.background.size=e.size},setPageWidth(t,e){t.loadedPage.size.x=e.width},setPageHeight(t,e){t.loadedPage.size.y=e.height},newSketch(t,e){t.loadedPage.objects.sketches.push({coordinates:[],color:JSON.parse(JSON.stringify(e))})},drawLine(t,e){e.sketch.coordinates.push({x:e.x,y:e.y,width:e.pressure})},addPencil(t,e){t.pencils.push({color:e.color,width:e.width})},changePencilColor(t,e){t.pencils[e.id].color=e.color},changePencilWidth(t,e){t.pencils[e.id].width=e.width},selectPencil(t,e){e.id<t.pencils.length&&(t.selectedPencilId=e.id)},switchPencilSettings(t,e){t.openedPencilSettingsId=e.id},closePencilSettings(t){t.openedPencilSettingsId=-1},newTextBox(t,e){console.log("newTextBox"),t.loadedPage.objects.textBoxes.push({position:{x:e.x,y:e.y,width:e.width,height:e.height,rotation:0,transformOrigin:"50% 50%"},content:{},quill:void 0})},setTextBoxContent(t,e){t.loadedPage.objects.textBoxes[e.id].content=e.content},assignQuillToTextBox(t,e){t.loadedPage.objects.textBoxes[e.id].quill=e.quill},formatText(t,e){if("textBoxes"==t.focusedObjectType){let o;o=e.id?t.loadedPage.objects.textBoxes[e.id].quill:t.loadedPage.objects.textBoxes[t.focuseObjectId].quill,o.format(e.format,e.value,"api")}},removeFormat(t){if("textBoxes"==t.focusedObjectType){let e=t.loadedPage.objects.textBoxes[t.focuseObjectId].quill,o=e.getSelection();e.removeFormat(o.index,o.length,"api")}},insertText(t,e){if("textBoxes"==t.focusedObjectType){let o=t.loadedPage.objects.textBoxes[t.focuseObjectId].quill,i=o.getSelection();o.insertText(i.index,e.text,{})}},insertEmbed(t,e){let o=t.loadedPage.objects.textBoxes[t.focuseObjectId].quill,i=o.getSelection();console.log(i),o.insertEmbed(i.index,e.type,e.content)},newShape(t,e){console.log("newShape"),t.loadedPage.objects.shapes.push({type:e.type,position:{x:e.x,y:e.y,width:e.width,height:e.height,rotation:0,transformOrigin:"50% 50%"},strokeWeight:e.strokeWeight,color:{stroke:"#000000",fill:"#ffffff00"},distort:e.distort})},setShapeFillColor(t,e){t.loadedPage.objects.shapes[e.id].color.fill=e.color},setShapeStrokeColor(t,e){t.loadedPage.objects.shapes[e.id].color.stroke=e.color},setShapeDistort(t,e){t.loadedPage.objects.shapes[e.id].distort=e.distort},moveObject(t,e){e.x>=0&&e.x<=t.loadedPage.size.x&&(t.loadedPage.objects[e.type][e.id].position.x=e.x),e.y>=0&&e.y<=t.loadedPage.size.y&&(t.loadedPage.objects[e.type][e.id].position.y=e.y)},resizeObject(t,e){t.loadedPage.objects[e.type][e.id].position.width=e.width,t.loadedPage.objects[e.type][e.id].position.height=e.height},rotateObject(t,e){t.loadedPage.objects[e.type][e.id].position.rotation=e.rotation},setObjectTransformOrigin(t,e){t.loadedPage.objects[e.type][e.id].position.transformOrigin=e.transformOrigin}},getters:{objectFocused:t=>(e,o)=>(console.log(t.focusedObjects[e]),t.focusedObjects[e].includes(o)),numberOfObjectsFocused:t=>{let e=0;for(let o in t.focusedObjects)e+=t.focusedObjects[o].length;return e},moveableOptions:t=>{let e=[];for(let i=0;i<=t.loadedPage.size.x;i+=t.loadedPage.background.size)e.push(i);let o=[];for(let i=0;i<=t.loadedPage.size.y;i+=t.loadedPage.background.size)o.push(i);return{draggable:!0,throttleDrag:1,resizable:!0,throttleResize:1,keepRatio:!1,scalable:!1,throttleScale:1,rotatable:!0,throttleRotate:1,pinchable:!0,originDraggable:!0,edge:!0,renderDirections:["nw","n","ne","w","e","sw","s","se"],bounds:{left:0,top:0},horizontalGuidelines:e,verticalGuidelines:o,snappable:!0,snapThreshold:5,snapVertical:!0,snapHorizontal:!0,snapElement:!0}},lastSketch:function(t){return 0!=t.loadedPage.objects.sketches.length&&t.loadedPage.objects.sketches[t.loadedPage.objects.sketches.length-1]},selectedPencil:function(t){return t.pencils[t.selectedPencilId]},textSelection:function(t){if("textBoxes"==t.focusedObjectType){let e=t.loadedPage.objects.textBoxes[t.focuseObjectId].quill;if(e&&0==t.openedDialog)return e.getSelection()}return!1},getFormat:t=>e=>{if("textBoxes"==t.focusedObjectType){let o=t.loadedPage.objects.textBoxes[t.focuseObjectId].quill;return!!o&&o.getFormat(e.index,e.length)[e.format]}}},actions:{pointerUp:function({commit:t}){t("setPointer",{down:!1,x:!1,y:!1,pressure:!1})},selectPencil:function({commit:t},e){t("selectPencil",{id:e.id},{module:"core"}),t("switchEditingMode",{mode:"drawing"},{module:"core"})}}};i.ZP.config.productionTip=!1,i.ZP.use(n.ZP),console.log(Mo);const Oo=new n.ZP.Store({modules:{core:Mo}});i.ZP.use(jo,{store:Oo,debug:!1}),new i.ZP({render:function(t){return t(u)},store:Oo}).$mount("#app")}},e={};function o(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,i,n,s){if(!i){var a=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],s=t[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](i[l])}))?i.splice(l--,1):(r=!1,s<a&&(a=s));if(r){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[i,n,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};o.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"===typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"===typeof i.then)return i}var s=Object.create(null);o.r(s);var a={};t=t||[null,e({}),e([]),e(e)];for(var r=2&n&&i;"object"==typeof r&&!~t.indexOf(r);r=e(r))Object.getOwnPropertyNames(r).forEach((function(t){a[t]=function(){return i[t]}}));return a["default"]=function(){return i},o.d(s,a),s}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,i){return o.f[i](t,e),e}),[]))}}(),function(){o.u=function(t){return"js/"+t+"."+{403:"21e5f70b",495:"8fe1bf7c"}[t]+".js"}}(),function(){o.miniCssF=function(t){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="dev-server:";o.l=function(i,n,s,a){if(t[i])t[i].push(n);else{var r,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==e+s){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",e+s),r.src=i),t[i]=[n];var h=function(e,o){r.onerror=r.onload=null,clearTimeout(m);var n=t[i];if(delete t[i],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(t){return t(o)})),e)return e(o)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.p="/notes-core/"}(),function(){var t={143:0};o.f.j=function(e,i){var n=o.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise((function(o,i){n=t[e]=[o,i]}));i.push(n[2]=s);var a=o.p+o.u(e),r=new Error,l=function(i){if(o.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;r.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",r.name="ChunkLoadError",r.type=s,r.request=a,n[1](r)}};o.l(a,l,"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,s,a=i[0],r=i[1],l=i[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(n in r)o.o(r,n)&&(o.m[n]=r[n]);if(l)var c=l(o)}for(e&&e(i);d<a.length;d++)s=a[d],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(c)},i=self["webpackChunkdev_server"]=self["webpackChunkdev_server"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(7041)}));i=o.O(i)})();
//# sourceMappingURL=app.ca6aba1e.js.map